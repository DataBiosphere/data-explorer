### Generating `requirements.txt`

`requirements.txt` is autogenerated from `requirements-to-freeze.txt`. The
latter lists only direct dependencies. To regenerate, in `api` directory run:

```
virtualenv ~/virtualenv/data-explorer-api
source ~/virtualenv/data-explorer-api/bin/activate
# Find out latest version of package
pip install PACKAGE==foobar
# Now put PACKAGE==VERSION in requirements-to-freeze.txt
pip install -r requirements-to-freeze.txt
pip freeze | sort -f > requirements.txt
deactivate
```

### Generating mock responses for API server unit tests

In the [API server unit tests](https://github.com/DataBiosphere/data-explorer/blob/master/api/data_explorer/test/test_facets_controller.py),
we mock Elasticsearch and API server responses using urllib3_mock. To get sample
responses:

* Run local servers
* To print Elasticsearch response, add to `facets_controller.py` `facets_get()`:
  ```
  import json
  dict_to_print = dict(es_response.to_dict())
  # DatasetFacetedSearch object is not JSON serializable, so remove it
  del dict_to_print['_faceted_search']
  # Use json.dumps so double quotes are used instead of single quotes
  current_app.logger.info(json.dumps(dict_to_print, indent=2))
  ```
  To print API server `facets/` response, add to `facets_controller.py` `facets_get()`
  ```
  resp = FacetsResponse(facets=facets, count=es_response._faceted_search.count())
  current_app.logger.info(json.dumps(resp.to_dict(), indent=2))
  return resp
  ```
* Load http://localhost:4400/ in browser
* Copy/paste is easier with `docker logs data-explorer_apise_1`, versus
  `docker-compose logs apise`
